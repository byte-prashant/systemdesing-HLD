<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36" version="24.7.17">
  <diagram name="Page-1" id="XG6kTlbUiC65EXP4oLxX">
    <mxGraphModel dx="1811" dy="2962" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hkUYqx7d3SaLa9oezbLV-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-6" target="hkUYqx7d3SaLa9oezbLV-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="-1765" as="sourcePoint" />
            <mxPoint x="510" y="-1770" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="-1828" />
              <mxPoint x="320" y="-1760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-3" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-4" value="databse" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-5" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-3" target="hkUYqx7d3SaLa9oezbLV-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="-1550" as="sourcePoint" />
            <mxPoint x="700" y="-1600" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="-1668" />
              <mxPoint x="320" y="-1592" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-6" value="client" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1900" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-12" target="hkUYqx7d3SaLa9oezbLV-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="-1195" as="sourcePoint" />
            <mxPoint x="510" y="-1200" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="-1258" />
              <mxPoint x="320" y="-1190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-9" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-10" value="databse" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1010" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-11" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-9" target="hkUYqx7d3SaLa9oezbLV-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="-980" as="sourcePoint" />
            <mxPoint x="700" y="-1030" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="-1098" />
              <mxPoint x="320" y="-1022" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-12" value="client" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1310" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-13" value="KGS" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="-1170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-9" target="hkUYqx7d3SaLa9oezbLV-13">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="-1110" as="sourcePoint" />
            <mxPoint x="390" y="-1160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-15" value="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="320" y="-1230" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-16" value="2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="420" y="-1170" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-17" value="3" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="304" y="-1070" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-33" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-37" target="hkUYqx7d3SaLa9oezbLV-34">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="-685" as="sourcePoint" />
            <mxPoint x="300" y="-690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="110" y="-748" />
              <mxPoint x="110" y="-680" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-34" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="50" y="-660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-35" value="databse" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="50" y="-500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-36" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-34" target="hkUYqx7d3SaLa9oezbLV-35">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="440" y="-470" as="sourcePoint" />
            <mxPoint x="490" y="-520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="110" y="-588" />
              <mxPoint x="110" y="-512" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-37" value="client" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="50" y="-810" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-38" value="KGS" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="-660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-39" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-34" target="hkUYqx7d3SaLa9oezbLV-38">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="130" y="-600" as="sourcePoint" />
            <mxPoint x="180" y="-650" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-40" value="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="-720" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-41" value="2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="210" y="-660" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-42" value="3" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="94" y="-560" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-43" value="Token service" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="-660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-44" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-38" target="hkUYqx7d3SaLa9oezbLV-43">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="-730" as="sourcePoint" />
            <mxPoint x="390" y="-780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-45" value="4" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="480" y="-660" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-46" value="bloom fileter&lt;br&gt;long url" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="-490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-47" value="zoo keeper" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="-500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-48" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" target="hkUYqx7d3SaLa9oezbLV-43">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="710" y="-510" as="sourcePoint" />
            <mxPoint x="720" y="-600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-49" value="shard key = hash(key" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="480" y="-620" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-50" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.567;entryY=0.017;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-38" target="hkUYqx7d3SaLa9oezbLV-46">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="-640" as="sourcePoint" />
            <mxPoint x="390" y="-690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-52" value="shard key = hash(short)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="34" y="-580" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-53" value="" style="swimlane;startSize=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="-715" width="610" height="300" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-56" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Read Path&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-30" y="-390" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-57" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-61" target="hkUYqx7d3SaLa9oezbLV-58">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="-95" as="sourcePoint" />
            <mxPoint x="510" y="-100" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="-158" />
              <mxPoint x="320" y="-90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-58" value="LB" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-59" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-60" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-58" target="hkUYqx7d3SaLa9oezbLV-59">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="120" as="sourcePoint" />
            <mxPoint x="700" y="70" as="targetPoint" />
            <Array as="points">
              <mxPoint x="320" y="2" />
              <mxPoint x="320" y="78" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-61" value="client" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="260" y="-210" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-62" value="database" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-63" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-59" target="hkUYqx7d3SaLa9oezbLV-62">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="-10" as="sourcePoint" />
            <mxPoint x="390" y="-60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-64" value="2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="320" y="-130" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-66" value="3" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="304" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-67" value="CDN" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="-205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-68" value="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="400" y="-205" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-69" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-61" target="hkUYqx7d3SaLa9oezbLV-67">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="10" as="sourcePoint" />
            <mxPoint x="390" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-70" value="cache" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-71" value="bloom filter&lt;br&gt;short url" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-72" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-59" target="hkUYqx7d3SaLa9oezbLV-71">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="10" as="sourcePoint" />
            <mxPoint x="390" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-76" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-59" target="hkUYqx7d3SaLa9oezbLV-70">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="10" as="sourcePoint" />
            <mxPoint x="390" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-77" value="4" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="150" y="150" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-78" value="5" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="440" y="140" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-79" value="6" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="320" y="170" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-84" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;ul style=&quot;margin: 0.5rem 0px; padding-left: 2.5rem; color: rgb(22, 18, 9); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, Emoji, Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 400; background-color: rgb(255, 255, 255);&quot;&gt;&lt;li&gt;partition the cache servers (use the short URL as the partition key)&lt;/li&gt;&lt;li&gt;replicate the cache servers to handle heavy loads using&amp;nbsp;&lt;a style=&quot;background-color: transparent; text-decoration-line: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://redis.io/docs/management/replication/&quot;&gt;leader-follower topology&lt;/a&gt;&lt;/li&gt;&lt;li&gt;redirect the write operations to the leader&lt;/li&gt;&lt;li&gt;redirect all the read operations to the follower replicas&lt;/li&gt;&lt;/ul&gt;&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-90" y="-360" width="730" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-87" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;cache scaling&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-120" y="300" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-88" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="220" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-89" value="cache leader" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-90" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-88" target="hkUYqx7d3SaLa9oezbLV-89">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="280" as="sourcePoint" />
            <mxPoint x="350" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-91" value="cache follower" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-92" value="cache follower" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="10" y="620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-93" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-88" target="hkUYqx7d3SaLa9oezbLV-92">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="300" as="sourcePoint" />
            <mxPoint x="350" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-94" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-88" target="hkUYqx7d3SaLa9oezbLV-91">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="300" as="sourcePoint" />
            <mxPoint x="350" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-95" value="read" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="120" y="460" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-96" value="read" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="400" y="480" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-97" value="write" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="280" y="460" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-98" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-92" target="hkUYqx7d3SaLa9oezbLV-89">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="390" as="sourcePoint" />
            <mxPoint x="390" y="340" as="targetPoint" />
            <Array as="points">
              <mxPoint x="130" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-99" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-89" target="hkUYqx7d3SaLa9oezbLV-91">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="630" as="sourcePoint" />
            <mxPoint x="410" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-100" value="replication" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="180" y="590" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-101" value="replication" style="text;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="590" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-102" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;considering all components&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-140" y="790" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-123" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-127" target="hkUYqx7d3SaLa9oezbLV-124">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="985" as="sourcePoint" />
            <mxPoint x="520" y="980" as="targetPoint" />
            <Array as="points">
              <mxPoint x="330" y="922" />
              <mxPoint x="330" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-124" value="LB" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="270" y="1050" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-125" value="server" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="270" y="1170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-126" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;noEdgeStyle=1;orthogonal=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-124" target="hkUYqx7d3SaLa9oezbLV-125">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="1200" as="sourcePoint" />
            <mxPoint x="710" y="1150" as="targetPoint" />
            <Array as="points">
              <mxPoint x="330" y="1082" />
              <mxPoint x="330" y="1158" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-127" value="client" style="rounded=0;whiteSpace=wrap;html=1;direction=west;" vertex="1" parent="1">
          <mxGeometry x="270" y="870" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-128" value="database" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="270" y="1300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-129" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-125" target="hkUYqx7d3SaLa9oezbLV-128">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="1070" as="sourcePoint" />
            <mxPoint x="400" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-130" value="3" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="330" y="950" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-131" value="5" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="314" y="1110" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-132" value="CDN" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="875" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-133" value="2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="410" y="875" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-134" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-127" target="hkUYqx7d3SaLa9oezbLV-132">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="1090" as="sourcePoint" />
            <mxPoint x="400" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-135" value="cache" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="1300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-136" value="bloom filter&lt;br&gt;short url" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="1300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-137" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-125" target="hkUYqx7d3SaLa9oezbLV-136">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="1090" as="sourcePoint" />
            <mxPoint x="400" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-138" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-125" target="hkUYqx7d3SaLa9oezbLV-135">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="1090" as="sourcePoint" />
            <mxPoint x="400" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-139" value="6" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="160" y="1230" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-140" value="7" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="450" y="1220" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-141" value="8" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="330" y="1250" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-142" value="DNS" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-143" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-127" target="hkUYqx7d3SaLa9oezbLV-142">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="970" as="sourcePoint" />
            <mxPoint x="390" y="920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-144" value="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="410" y="815" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-145" value="rate limiter" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="1050" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-146" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-124" target="hkUYqx7d3SaLa9oezbLV-145">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="1190" as="sourcePoint" />
            <mxPoint x="390" y="1140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-148" value="4" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="440" y="1050" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-149" value="controller" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="1140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-150" value="" style="curved=1;endArrow=classic;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="hkUYqx7d3SaLa9oezbLV-149" target="hkUYqx7d3SaLa9oezbLV-125">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="1190" as="sourcePoint" />
            <mxPoint x="390" y="1140" as="targetPoint" />
            <Array as="points">
              <mxPoint x="410" y="1130" />
              <mxPoint x="460" y="1170" />
              <mxPoint x="340" y="1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-153" value="" style="endArrow=classic;html=1;rounded=0;dashed=1;" edge="1" parent="1" target="hkUYqx7d3SaLa9oezbLV-154">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="1204" as="sourcePoint" />
            <mxPoint x="550" y="1260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-154" value="" style="swimlane;startSize=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="1260" width="720" height="200" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-155" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;br&gt;&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-140" y="-2110" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-156" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Write path&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-130" y="-1460" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-157" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;First desing&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-130" y="-1990" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-158" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://systemdesign.one/url-shortening-system-design/distributed-lock.webp;" vertex="1" parent="1">
          <mxGeometry x="-170" y="4030" width="1200" height="701" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-159" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;scalability&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-130" y="1520" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-160" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://systemdesign.one/url-shortening-system-design/segregated-read-write-paths.webp;" vertex="1" parent="1">
          <mxGeometry x="-51" y="1598" width="661" height="478.83" as="geometry" />
        </mxCell>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-161" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Fault tolerant&lt;/h1&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-110" y="2570" width="180" height="120" as="geometry" />
        </mxCell>
        <UserObject label="&lt;meta charset=&quot;utf-8&quot;&gt;&lt;p style=&quot;margin: 0.5rem 0px; color: rgb(22, 18, 9); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, Emoji, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;The microservices architecture improves the fault tolerance of the system. The microservices are isolated from each other and the services will fail independently. Simply put, a service failure means reduced functionality without the whole system going down. For instance, the failure of a metric service will not affect the URL redirection requests. The&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://en.wikipedia.org/wiki/Event-driven_architecture&quot;&gt;event-driven architecture&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;also helps to isolate the services and improve the reliability of the system, and scale by naturally supporting multiple consumers&lt;sup style=&quot;font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; scroll-margin-top: calc(var(--header-height) + .5rem);&quot; id=&quot;fnref:12&quot;&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; role=&quot;doc-noteref&quot; class=&quot;footnote-ref&quot; href=&quot;https://systemdesign.one/url-shortening-system-design/#fn:12&quot;&gt;12&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;&lt;p style=&quot;margin: 0.5rem 0px; color: rgb(22, 18, 9); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, Emoji, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;The introduction of a message queue such as&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://kafka.apache.org/&quot;&gt;Apache Kafka&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;further improves the fault tolerance of the URL shortener. The message queue must be provisioned in the write and read paths of the system. However, the message queue must be&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://en.wikipedia.org/wiki/Application_checkpointing&quot;&gt;checkpointed&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;frequently for reliability&lt;/p&gt;" link="&lt;meta charset=&quot;utf-8&quot;&gt;&lt;p style=&quot;margin: 0.5rem 0px; color: rgb(22, 18, 9); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, Emoji, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;The microservices architecture improves the fault tolerance of the system. The microservices are isolated from each other and the services will fail independently. Simply put, a service failure means reduced functionality without the whole system going down. For instance, the failure of a metric service will not affect the URL redirection requests. The&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://en.wikipedia.org/wiki/Event-driven_architecture&quot;&gt;event-driven architecture&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;also helps to isolate the services and improve the reliability of the system, and scale by naturally supporting multiple consumers&lt;sup style=&quot;font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; scroll-margin-top: calc(var(--header-height) + .5rem);&quot; id=&quot;fnref:12&quot;&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; role=&quot;doc-noteref&quot; class=&quot;footnote-ref&quot; href=&quot;https://systemdesign.one/url-shortening-system-design/#fn:12&quot;&gt;12&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;&lt;p style=&quot;margin: 0.5rem 0px; color: rgb(22, 18, 9); font-family: system-ui, -apple-system, &amp;quot;Segoe UI&amp;quot;, Roboto, Emoji, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;The introduction of a message queue such as&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://kafka.apache.org/&quot;&gt;Apache Kafka&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;further improves the fault tolerance of the URL shortener. The message queue must be provisioned in the write and read paths of the system. However, the message queue must be&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;background-color: transparent; text-decoration: none; color: rgb(45, 150, 189); overflow-wrap: break-word;&quot; rel=&quot;noopener noreffer&quot; target=&quot;_blank&quot; href=&quot;https://en.wikipedia.org/wiki/Application_checkpointing&quot;&gt;checkpointed&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;frequently for reliability&lt;/p&gt;" id="hkUYqx7d3SaLa9oezbLV-163">
          <mxCell style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
            <mxGeometry x="-90" y="2615" width="860" height="265" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="hkUYqx7d3SaLa9oezbLV-164" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://systemdesign.one/url-shortening-system-design/url-shortener-message-queue.webp;" vertex="1" parent="1">
          <mxGeometry x="40" y="2860" width="560" height="413" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
